<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>События</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link th:href="@{/css/style.css}" rel="stylesheet">
</head>
<body>
<script>
    function hasJwtCookie() {
        return document.cookie.split('; ')
            .some(c => c.startsWith('JWT='));
    }

</script>

<div class="events-wrapper">
    <h1>События</h1>
    <table class="events-table">
        <thead>
        <tr><th>ID</th><th>Тип</th><th>Действие</th><th>Статус</th><th>Время</th><th>Payload</th></tr>
        </thead>
        <tbody>
        <tr th:each="e:${events}">
            <td data-label="ID"      th:text="${e.id}"></td>
            <td data-label="Тип"     th:text="${e.evtType}"></td>
            <td data-label="Действие"th:text="${e.action}"></td>
            <td data-label="Статус"  th:text="${e.status}"></td>
            <td data-label="Время"   th:text="${#temporals.format(e.ts.plusHours(9),'yyyy-MM-dd HH:mm:ss')}"></td>
            <td data-label="Payload" class="payload-cell" th:text="${e.payload}"></td>
        </tr>
        </tbody>
    </table>

    <div style="display:flex;justify-content:center;gap:10px;margin-top:15px">
        <a th:if="${currentPage>0}"
           th:href="@{|/events?page=${currentPage-1}&size=${size}|}">« Назад</a>
        <span th:text="${currentPage+1} + ' / ' + ${totalPages}"></span>
        <a th:if="${currentPage+1<totalPages}"
           th:href="@{|/events?page=${currentPage+1}&size=${size}|}">Вперёд »</a>
    </div>
</div>
</body>
</html>
